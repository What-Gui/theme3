<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="Software Obfuscation Let us stop and think of the notions we have seen in cryptography. We have seen that under reasonable computational assumptions (such as LWE) we can achieve the following:\nCPA secure private key encryption and Message Authentication codes (which can be combined to get CCA security or authenticated encryption)- this means that two parties that share a key can have virtual secure channel between them. An adversary cannot get any additional information beyond whatever is her prior knowledge given an encryption of a message sent from Alice to Bob. Moreover, she cannot modify this message by even a single bit. It&rsquo;s lucky we only discovered these results from the 1970&rsquo;s onwards&mdash; if the Germans had used such an encryption instead of ENIGMA in World War II there&rsquo;s no telling how many more lives would have been lost.\n">
<title>Software obfuscation</title>

<link rel='canonical' href='http://localhost:1313/p/software-obfuscation/'>

<link rel="stylesheet" href="/scss/style.min.0304c6baf04e01a8fe70693791cb744d56a3578a3120a8796cefc66825aa39c7.css"><meta property='og:title' content="Software obfuscation">
<meta property='og:description' content="Software Obfuscation Let us stop and think of the notions we have seen in cryptography. We have seen that under reasonable computational assumptions (such as LWE) we can achieve the following:\nCPA secure private key encryption and Message Authentication codes (which can be combined to get CCA security or authenticated encryption)- this means that two parties that share a key can have virtual secure channel between them. An adversary cannot get any additional information beyond whatever is her prior knowledge given an encryption of a message sent from Alice to Bob. Moreover, she cannot modify this message by even a single bit. It&rsquo;s lucky we only discovered these results from the 1970&rsquo;s onwards&mdash; if the Germans had used such an encryption instead of ENIGMA in World War II there&rsquo;s no telling how many more lives would have been lost.\n">
<meta property='og:url' content='http://localhost:1313/p/software-obfuscation/'>
<meta property='og:site_name' content='Example Site'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' />
<meta name="twitter:title" content="Software obfuscation">
<meta name="twitter:description" content="Software Obfuscation Let us stop and think of the notions we have seen in cryptography. We have seen that under reasonable computational assumptions (such as LWE) we can achieve the following:\nCPA secure private key encryption and Message Authentication codes (which can be combined to get CCA security or authenticated encryption)- this means that two parties that share a key can have virtual secure channel between them. An adversary cannot get any additional information beyond whatever is her prior knowledge given an encryption of a message sent from Alice to Bob. Moreover, she cannot modify this message by even a single bit. It&rsquo;s lucky we only discovered these results from the 1970&rsquo;s onwards&mdash; if the Germans had used such an encryption instead of ENIGMA in World War II there&rsquo;s no telling how many more lives would have been lost.\n">
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true}, 
                {left: "$", right: "$", display: false}  
            ]
        });
    });
</script>
<script>
    MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$'], ['\\[', '\\]']]
        }
    };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu13739649187745961479.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üç•</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Example Site</a></h1>
            <h2 class="site-description">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/CaiJimmy/hugo-theme-stack'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">
                    
                        <li id="i18n-switch">  
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                            <select name="language" title="language" onchange="window.location.href = this.selectedOptions[0].value">
                                
                                    <option value="http://localhost:1313/" selected>English</option>
                                
                                    <option value="http://localhost:1313/zh-cn/" >‰∏≠Êñá</option>
                                
                                    <option value="http://localhost:1313/ar/" >ÿπÿ±ÿ®Ÿä</option>
                                
                            </select>
                        </li>
                    
                

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>Dark Mode</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#witness-encryption">Witness encryption</a></li>
    <li><a href="#deniable-encryption">Deniable encryption</a></li>
    <li><a href="#functional-encryption">Functional encryption</a></li>
  </ol>

  <ol>
    <li><a href="#the-software-patch-problem">The software patch problem</a></li>
    <li><a href="#software-obfuscation-1">Software obfuscation</a></li>
  </ol>

  <ol>
    <li><a href="#applications-of-obfuscation">Applications of obfuscation</a></li>
    <li><a href="#impossibility-of-obfuscation">Impossibility of obfuscation</a></li>
  </ol>

  <ol>
    <li>
      <ol>
        <li><a href="#proof-of-impossibility-of-vbb-obfuscation">Proof of impossibility of VBB obfuscation</a></li>
      </ol>
    </li>
  </ol>

  <ol>
    <li><a href="#indistinguishability-obfuscation">Indistinguishability obfuscation</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/software-obfuscation/">Software obfuscation</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    18 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="software-obfuscation">Software Obfuscation
</h1><p>Let us stop and think of the notions we have seen in cryptography. We have seen that under reasonable computational assumptions (such as LWE) we can achieve the following:</p>
<ul>
<li>
<p>CPA secure <em>private key encryption</em> and <em>Message Authentication codes</em> (which can be combined to get CCA security or authenticated encryption)- this means that two parties that share a key can have virtual secure channel between them. An adversary cannot get <em>any additional information</em> beyond whatever is her prior knowledge given an encryption of a message sent from Alice to Bob. Moreover, she cannot modify this message by even a single bit. It&rsquo;s lucky we only discovered these results from the 1970&rsquo;s onwards&mdash; if the Germans had used such an encryption instead of ENIGMA in World War II there&rsquo;s no telling how many more lives would have been lost.</p>
</li>
<li>
<p><em>Public key encryption</em> and <em>digital signatures</em> that enable Alice and Bob to set up such a virtually secure channel without <em>sharing a prior key</em>. This enables our &ldquo;information economy&rdquo; and protects virtually every financial transaction over the web. Moreover, it is the crucial mechanism for supplying &ldquo;over the air&rdquo; software updates to smart devices, whether they be phones, cars, thermostats or anything else. Some had predicted that this invention would change the nature of our form of government to <a class="link" href="http://www.activism.net/cypherpunk/crypto-anarchy.html"  target="_blank" rel="noopener"
    >crypto anarchy</a> and while this may be hyperbole, governments everywhere are <a class="link" href="https://www.fbi.gov/about-us/otd/going-dark-issue"  target="_blank" rel="noopener"
    >worried</a> about this invention.</p>
</li>
<li>
<p><em>Hash functions</em> and <em>pseudorandom functions</em> enable us to create authentication tokens for deriving one-time passwords out of shared keys, or deriving long keys from short passwords. They are also useful as a tool in a <em>password based key exchange</em>, which enables two parties to communicate securely (with fairly good but not overwhelming probability)  when they share a 6 digit PIN, even if the adversary can easily afford much much more than $10^6$ computational cycles.</p>
</li>
<li>
<p><em>Fully homomorphic encryption</em> allows computing over encrypted data. Bob could prepare Alice&rsquo;s taxes without knowing what her income is, and more generally store all her data and perform computations on it, without knowing what the data is.</p>
</li>
<li>
<p><em>Zero knowledge proofs</em> can be used to prove a statement is true without revealing <em>why</em> its true. In particular since you can use zero knowledge proofs to prove that you posses X bitcoins without giving any information about their identity, they have been used to obtain <a class="link" href="http://zerocash-project.org/"  target="_blank" rel="noopener"
    >fully anonymous electronic currency</a>.</p>
</li>
<li>
<p><em>Multiparty secure computation</em> are a fully general tool that enable Alice and Bob (and Charlie, David, Elana, Fran, etc.) to perform any computation on their private inputs, whether it is to compute the result of a vote, a second-price auction, privacy-preserving data mining, perform a cryptographic operation in a distributed manner (without any party ever learning the secret key) or simply play poker online without needing to trust any central server.</p>
</li>
</ul>
<p>(BTW all of the above points are notions that you should be familiar and be able to explain what are their security guarantees if you ever need to use them, for example, in the unlikely event that you ever find yourself needing to take a cryptography final exam&hellip;)</p>
<p>While clearly there are issues of efficiency, is there anything more in terms of <em>functionality</em> we could ask for?
Given all these riches, can we be even more greedy?</p>
<p>It turns out that the answer is <em>yes</em>.
Here are some scenarios that are still not covered by the above tools:</p>
<h2 id="witness-encryption">Witness encryption
</h2><p>Suppose that you have uncovered a conspiracy that involves very powerful people, and you are afraid that something bad might happen to you.
You would like an &ldquo;insurance policy&rdquo; in the form of writing down everything you know and making sure it is published in the case of your untimely death, but are afraid these powerful people could find and attack any trusted agent.
Ideally you would want to publish an encrypted form of your manuscript far and wide, and make sure the decryption key is automatically revealed if anything happens to you, but how could you do that?
A <em>UA-secure encryption</em> (which stands for secure against an <a class="link" href="https://goo.gl/8ms4wP"  target="_blank" rel="noopener"
    >Underwood</a> attack) gives an ability to create an encryption $c$ of a message $m$ that is CPA secure but such that there is an algorithm $D$ such that on input $c$ and any string $w$ which is a (digitally signed) New York Times obituary for Janine Skorsky will output $m$.</p>
<p>The technical term for this notion is <em>witness encryption</em>, by which we mean that for every circuit $F$ we have an algorithm $E$ that on input $F$ and a message $m$ creates a ciphertext $c$ that is CPA secure, and there is an algorithm $D$ that on input $c$ and some string $w$,  outputs $m$ if $F(w)=1$.
In other words, instead of the key being a unique string, the key is <em>any</em> string $w$ that satisfies a certain condition.
Witness encryption can be used for other applications.
For example, you could encrypt a message to future members of humanity, that can be decrypted only using a valid proof of the Riemann Hypothesis.</p>
<h2 id="deniable-encryption">Deniable encryption
</h2><p>Here is another scenario that is seemingly not covered by our current tools.
Suppose that Alice uses a public key system $(G,E,D)$ to encrypt a message $m$ by computing $c=E_e(m,r)$ and sending $c$  to Bob that will compute $m=D_d(c)$.
The ciphertext is intercepted by Bob&rsquo;s archenemy Freddie Baskerville Ignatius (or FBI for short) who has the means to force Alice to reveal the message and as proof reveal the randomness used in encryption as well.
Could Alice find, for any choice of $m&rsquo;$, some string $r&rsquo;$ that is pseudorandom and for which $c$ equals $E_e(m&rsquo;,r&rsquo;)$?
An encryption scheme with this property is called <em>deniable</em>, since we Alice can deny she sent $m$ and claim she sent $m&rsquo;$ instead.<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<h2 id="functional-encryption">Functional encryption
</h2><p>It&rsquo;s not just individuals that don&rsquo;t have all their needs met by our current tools.
Think of a large enterprise that uses a public key encryption $(G,E,D)$.
When a ciphertext $c=E_e(m)$ is received by the enterprise&rsquo;s servers, it needs to be decrypted using the secret key $d$.
But this creates a single point of failure.
It would be much better if we could create a &ldquo;weakened key&rdquo; $d_1$ that, for example, can only decrypt messages related to sales that were sent in the date range X-Y, a key $d_2$ that can only decrypt messages that contain certain keywords, or maybe a key $d_3$ that only allows to detect whether the message encoded by a particular ciphertext satisfies a certain regular expression.</p>
<p>This will allow us to give the key $d_1$ to the manager of the sales department (and not worry about her taking the key with her if she leaves the company), or more generally give every employee a key that corresponds to his or her role.
Furthermore, if the company receives a subpoena for all emails relating to a particular topic, it could give out a cryptographic key that reveals precisely these emails and nothing else.
It could also run a spam filter on encrypted messages without needing to give the server performing this filter access to the full contents of the messages (and so perhaps even outsource spam filtering to a different company).</p>
<p>The general form of this is called a <em>functional encryption</em>. The idea is that for every function $f:{0,1}^<em>\rightarrow{0,1}^</em>$ we can create a decryption key $d_f$ such that on input
$c= E_e(m)$, $D_{d_f}(c)=f(m)$ but $d_f$ cannot be used to gain any other information on the message except for $f(m)$, and even if several parties holding $d_{f_1},\ldots,d_{f_k}$ collude together, they can&rsquo;t learn more than simply $f_1(m),\ldots,f_k(m)$.
Note that using fully homomorphic encryption we can easily transform an encryption of $m$ to an encryption of $f(m)$ but what we want here is the ability to <em>selectively decrypt</em> only some information about the message.</p>
<p>The formal definition of functional encryption is the following:</p>
<blockquote>
<h1 id="funcencdeg">
</h1></blockquote>
<p>A tuple $(G,E,D,KeyDist)$ is a <em>functional encryption scheme</em> if:</p>
<blockquote>
</blockquote>
<ul>
<li>For every function $f:{0,1}^\ell\rightarrow{0,1}$, if $(d,e)=G(1^n)$ and $d_f = KeyDist(d,f)$, then for every message $m$, $D_{d_f}(E_e(m))=f(m)$.</li>
</ul>
<blockquote>
</blockquote>
<ul>
<li>Every efficient adversary Eve wins the following game with probability at most $1/2 + negl(n)$:</li>
</ul>
<blockquote>
</blockquote>
<ol>
<li>We generate $(d,e) \leftarrow_R G(1^n)$. \</li>
<li>Eve is given $e$ and for $i=1,\ldots,T=poly(n)$ repeatedly chooses $f_i$ and receives $d_{f_i}$. \</li>
<li>Eve chooses two messages $m_0,m_1$ such that $f_i(m_0)=f_i(m_1)$ for all $i = 1,\ldots, T$. \</li>
<li>For $b \leftarrow_R {0,1}$, Eve receives $c^* = E_e(m_b)$ and outputs $b&rsquo;$. \</li>
<li>Eve <em>wins</em> if $b&rsquo;=b$.</li>
</ol>
<p>\</p>
<h2 id="the-software-patch-problem">The software patch problem
</h2><p>It&rsquo;s not only exotic forms of encryption that we&rsquo;re missing.
Here is another application that is not yet solved by the above tools.
From time to time software companies discover a vulnerability in their products.
For example, they might discover that if fed an input $x$ of some particular form (e.g., satisfying a regular expression $R$) to a server running their software could give an adversary unlimited access to it.
In such a case, you might want to release a patch that modifies the software to check if $R(x)=1$ and if so rejects the input.
However the fear is that hackers who didn&rsquo;t know about the vulnerability before could discover it by examining the patch and then use it to attack the customers who are slow to update their software.
Could we come up for a regular expression $R$ with a program $P$ such that $P(x)=1$ if and only if $R(x)=1$ but examining the code of $P$ doesn&rsquo;t make it any easier to find some $x$ satisfying $R$?</p>
<h2 id="software-obfuscation-1">Software obfuscation
</h2><p>All these applications and more could in principle be solved by a single general tool known as <em>virtual black-box (VBB) secure software obfuscation</em>.
In fact, such an obfuscation is a general tool that can also be directly used to yield public key encryption, fully homomorphic encryption, zero knowledge proofs, secure function evaluation, and many more applications.</p>
<p>We will now give the definition of VBB secure obfuscation and prove the central result about it, which is unfortunately that secure VBB obfuscators do not exist.
We will then talk about the relaxed notion of <em>indistinguishablity obfuscators</em> (IO) - this object turns out to be good enough for many of the above applications and whether it exists is one of the most exciting open questions in cryptography at the moment.
We will survey some of the research on this front.</p>
<p>Let&rsquo;s define a <em>compiler</em> to be an efficient (i.e., polynomial time) possibly probabilistic map $\mathcal{O}$ that takes a Boolean circuit $C$ on $n$ bits of input and outputs a Boolean circuit $C&rsquo;$ that also takes $n$ input bits and computes the same function; i.e., $C(x)=C&rsquo;(x)$ for every $x\in{0,1}^n$.
(If $\mathcal{O}$ is probabilistic then this should happen for every choice of its coins.)
This might seem a strange definition, since it even allows the trivial compiler $\mathcal{O}(C)=C$.
That is OK, since later we will require additional properties such as the following:</p>
<blockquote>
<h1 id="vbbobfdeg">
</h1></blockquote>
<p>A compiler $\mathcal{O}$ is a <em>virtual black box (VBB) secure obfuscator</em>  if it satisfies the following property:
for every efficient adversary $A$ mapping ${0,1}^*$ to ${0,1}$, there exists an efficient simulator $S$ such that for every circuit $C$ the following random variables are computationally indistinguishable:</p>
<blockquote>
</blockquote>
<ul>
<li>$A(\mathcal{O}(C))$</li>
</ul>
<blockquote>
</blockquote>
<ul>
<li>$S^C(1^{|C|})$ where by this we mean the output of $S$ when it is given the length of $C$ and access to the function $x \mapsto C(x)$ as a black box (aka oracle access).</li>
</ul>
<p>(Note that the distributions above are of a single bit, and so being indistinguishable simply means that the probability of outputting $1$ is equal in both cases up to a negligible additive factor.)</p>
<h2 id="applications-of-obfuscation">Applications of obfuscation
</h2><p>The writings of Diffie and Hellman, James Ellis, and others that thought of public key encryption, shows that one of the first approaches they considered was to use obfuscation to transform a private-key encryption scheme into a public key one.
That is, given a private key encryption scheme $(E,D)$ we can transform it to a public key encryption scheme $(G,E&rsquo;,D)$ by having the key generation algorithm select a private key $k\leftarrow_R{0,1}^n$ that will serve as the decryption key, and let the encryption key $e$ be the circuit $\mathcal{O}(C)$ where $\mathcal{O}$ is an obfuscator and $C$ is a circuit mapping $c$ to $E_k(c)$.
The new encryption algorithm $E&rsquo;$ takes $e$ and $c$ and simply outputs $e(c)$.</p>
<p>These days we know other approaches for obtaining public key encryption, but the obfuscation-based approach has significant additional flexibility.
To turn this into a fully homomorphic encryption, we simply publish the obfuscation of $c,c&rsquo; \mapsto D_k(c) <del>NAND</del> D_k(c&rsquo;)$.
To turn this into a functional encryption, for every function $f$ we can define $d_f$ as the obfuscation of $c \mapsto f(D_k(c))$.</p>
<p>We can also use obfuscation to get a witness encryption: to encrypt a message $m$ to be opened using any $w$ such that $F(w)=1$, we can obfuscate the function that maps $w$ to $m$ if $F(w)=1$ and outputs <code>error</code> otherwise.
To solve the patch problem, for a given regular expression we can obfuscate the function that maps $x$ to $R(x)$.</p>
<h2 id="impossibility-of-obfuscation">Impossibility of obfuscation
</h2><p>So far, we&rsquo;ve learned that in cryptography no concept is too fantastic to be realized.
Unfortunately, VBB secure obfuscation <a class="link" href="http://www.boazbarak.org/Papers/obfuscate.pdf"  target="_blank" rel="noopener"
    >is an exception</a>:</p>
<blockquote>
<h1 id="obfimpthm">
</h1></blockquote>
<p>Under the PRG assumption, there does not exist a VBB secure obfuscating compiler.</p>
<h3 id="proof-of-impossibility-of-vbb-obfuscation">Proof of impossibility of VBB obfuscation
</h3><p>We will now show the proof of <a class="link" href="" >obfimpthm</a>{.ref}.
For starters, note that obfuscation is trivial for <em>learnable</em> functions.
That is, if $F$ is a function such that given black-box access to $F$ we can recover a circuit that computes it, then we can obfuscate it.
Given a circuit $C$, the obfuscator $\mathcal{O}$ will simply use it as a black box to learn a circuit $C&rsquo;$ that computes the same function and output it.
Since $\mathcal{O}$ itself only uses black box access to $C$, it can be trivially simulated perfectly.
(Verifying that this is indeed the case is a good way to make sure you followed the definition.)</p>
<p>However, this is not so useful, since it&rsquo;s not hard to see that all the examples above where we wanted to use obfuscation involved functions that were unlearnable.
But it already suggests that we should use an unlearnable function for our negative result.
Here is an extremely simple unlearnable function.
For every $\alpha,\beta\in{0,1}^n$, we define $F_{\alpha,\beta}:{0,1}^n\rightarrow{0,1}^n$ to be the function that on input $x$ outputs $\beta$ if $x=\alpha$ and otherwise outputs $0^n$.</p>
<p>Given black box access for this function for a random $\alpha,\beta$, it&rsquo;s extremely unlikely that we would hit $\alpha$ with a polynomial number of queries and hence will not be able to recover $\beta$ and so in particular will not be able to learn a circuit that computes $F_{\alpha,\beta}$.^[Pseudorandom functions can be used to construct examples of functions that are unlearnable in the much stronger sense that we cannot achieve the machine learning goal of outputting some circuit that <em>approximately predicts</em> the function.]</p>
<p>This function already yields a counterexample for a stronger version of the VBB definition.
We define a <em>strong VBB obfuscator</em> to be a compiler $\mathcal{O}$ that satisfies the above definition for adversaries that can output not just one bit but an arbitrary long string.
We can now prove the following:</p>
<blockquote>
<h1 id="strongvbblem">
</h1></blockquote>
<p>There does not exist a strong VBB obfuscator.</p>
<blockquote>
<h1 id="heading">
</h1></blockquote>
<p>Suppose towards a contradiction that there exists a strong VBB obfuscator $\mathcal{O}$. Let $F_{\alpha,\beta}$ be defined as above, and let $A$ be the adversary that on input a
circuit $C&rsquo;$ simply outputs $C&rsquo;$. We claim that for every $S$ there exists some $\alpha,\beta$ and an efficient algorithm $D_{\alpha,\beta}$</p>
<blockquote>
</blockquote>
<p>$\left| \Pr[ D_{\alpha,\beta}(A(\mathcal{O}(F_{\alpha,\beta})))=1] -\Pr[ D_{\alpha,\beta}(S^{F_{\alpha,\beta}}(1^{10n}))=1 ] \right| &gt; 0.9 ;; (*)$</p>
<blockquote>
</blockquote>
<p>these probabilities are over the coins of $\mathcal{O}$ and the simulator $S$. Note that we identify the function $F_{\alpha,\beta}$ with the obvious circuit of size at most $10n$ that computes it.</p>
<blockquote>
</blockquote>
<p>Clearly $(<em>)$ implies that that these two distributions are not indistinguishable, and so proving $(</em>)$ will finish the proof.
The algorithm $D_{\alpha,\beta}$ on input a circuit $C&rsquo;$ will simply output $1$ iff $C&rsquo;(\alpha)=\beta$.
By the definition of a compiler and the algorithm $A$,  for every $\alpha,\beta$,
$\Pr[ D_{\alpha,\beta}(A(\mathcal{O}(F_{\alpha,\beta})))=1]=1$.</p>
<blockquote>
</blockquote>
<p>On the other hand, for $D_{\alpha,\beta}$ to output $1$ on $C&rsquo; = S^{F_{\alpha,\beta}}(1^{10n})$, it must be the case that $C&rsquo;(\alpha)=\beta$.
We claim that there exists some $\alpha,\beta$ such that this will happen with negligible probability.
Indeed, assume $S$ makes $T=poly(n)$ queries and pick $\alpha,\beta$ independently and uniformly at random from ${0,1}^n$.
For every $i=1,\ldots,T$, let $E_i$ be the event that the $i^{th}$ query of $S$ is the first in which it gets a response other than $0^n$.
The probability of $E_i$ is at most $2^{-n}$ because as long as $S$ got all responses to be $0^n$, it got no information about $\alpha$ and so the choice of $S$&rsquo;s $i^{th}$ query is independent of $\alpha$ which is chosen at random in ${0,1}^n$.
By a union bound, the probability that $S$ got any response other than $0^n$ is negligible.
In which case if we let $C&rsquo;$ be the output of $S$ and let $\beta&rsquo; = C&rsquo;(\alpha)$, then $\beta&rsquo;$ is independent of $\beta$ and so the probability that they are equal is at most $2^{-n}$.</p>
<p>The adversary in the proof of <a class="link" href="" >strongvbblem</a>{.ref} does not seem very impressive.
After all, it merely printed out its input.
Indeed, the definition of strong VBB security might simply be an overkill, and &ldquo;plain&rdquo; VBB is enough for almost all applications.
However, as mentioned above, plain VBB is impossible to achieve as well.
We&rsquo;ll prove a slightly weaker version of <a class="link" href="" >obfimpthm</a>{.ref}:</p>
<blockquote>
<h1 id="obfimpweakthm">
</h1></blockquote>
<p>If fully homomorphic encryption exists then there is no VBB secure obfuscating compiler.</p>
<p>(To get the original theorem from this, note that if VBB obfuscation exists then we can transform any private key encryption into a fully homomorphic public key encryption.)</p>
<p>::: {.proof data-ref=&ldquo;obfimpweakthm&rdquo;}
Let $(G,E,D,EVAL)$ be a fully homomorphic encryption scheme.
For strings $d,e,c,\alpha,\beta,\gamma$, we will define the function $F_{d,e,c,\alpha,\beta,\gamma}$ as follows: for inputs of the form $00x$, it will output $\beta$ if and only if $x=\alpha$, and otherwise output $0^n$.
For inputs of the form $01c&rsquo;$, it will output $\gamma$ iff $D_d(c&rsquo;)=\beta$ and otherwise output $0^n$.
And for the input $1^n$, it will output $c$.
For all other inputs it will output $0^n$.</p>
<p>We will use this function family where $d,e$ are the keys of the FHE, and $c=E_e(\alpha)$.
We now define our adversary $A$. On input some circuit $C&rsquo;$, $A$ will compute $c&rsquo;=C&rsquo;(1^n)$ and let $C&rsquo;&rsquo;$ be the circuit that on input $x$ outputs $C&rsquo;(00x)$.
It will then let $c&rsquo;&rsquo; = EVAL_e(C&rsquo;&rsquo;,c&rsquo;)$.
Note that if $c&rsquo;$ is an encryption of $\alpha$ and $C&rsquo;$ computes $F=F_{d,e,c,\alpha,\beta,\gamma}$ then $c&rsquo;&rsquo;$ will be an encryption of $F(00\alpha)=\beta$.
The adversary $A$ will then compute $\gamma&rsquo; = C&rsquo;(01c&rsquo;&rsquo;)$ and output $\gamma_1&rsquo;$.</p>
<p>We claim that for every simulator $S$, there exist some tuple $(d,e,c,\alpha,\beta,\gamma)$ and a distinguisher $D$ such that</p>
<p>$$\left| \Pr[D(A(\mathcal{O}(F_{d,e,c,\alpha,\beta,\gamma})))=1] - \Pr[D(S^{F_{d,e,c,\alpha,\beta,\gamma}}(1^{|F_{d,e,c,\alpha,\beta,\gamma}|}))=1] \right| \geq 0.1$$</p>
<p>Indeed, the distinguisher $D$ will depend on $\gamma$ and on input a bit $b$ will simply output $1$ iff $b=\gamma_1$.
Clearly, if $(d,e)$ are keys of the FHE and $c=E_e(\alpha)$ then no matter what circuit $C&rsquo;$ the obfuscator $\mathcal{O}$ outputs on input $F_{d,e,c,\alpha,\beta,\gamma}$,
the adversary $A$ will output $\gamma_1$ on $C&rsquo;$ and hence $D$ will output $1$ with probability one on $A$&rsquo;s output.</p>
<blockquote>
</blockquote>
<p>In contrast if we let $S$ be a simulator and generate $(d,e)=G(1^n)$, pick $\alpha,\beta,\gamma$ independently at random in ${0,1}^n$ and let $c=E_e(\alpha)$,
we claim that the probability that $S$ will output $\gamma_1$ will be equal to $1/2 \pm negl(n)$.
Indeed, suppose otherwise, and define the event $E_i$ to be that the $i^{th}$ query is the first query (apart from the query $1^n$ whose answer is $c$) on which $S$ receives an answer other than $0^n$.
Now there are two cases:</p>
<p><strong>Case 1:</strong> The query is equal to $00\alpha$.</p>
<p><strong>Case 2:</strong> The query is equal to $01c&rsquo;$ for some $c&rsquo;$ such that $D_d(c&rsquo;)=\beta$.</p>
<p>Case 2 only happens with negligible probability because if $S$ only received the value $e$ (which is independent of $\beta$) and did not receive any other non $0^n$ response up to the $i^{th}$ point then it did not learn any information about $\beta$.
Therefore the value $\beta$ is independent of the $i^{th}$ query and the probability that it decrypts to $\beta$ is at most $2^{-n}$.</p>
<p>Case 1 only happens with negligible probability because otherwise $S$ is an algorithm that on input an encryption of $\alpha$ (and a bunch of answers of the form $0^n$, which are of course not helpful) manages to output $\alpha$ with non-negligible probability, hence violating the CPA security of the encryption scheme.</p>
<p>Now if neither case happens, then $S$ does not receive any information about $\gamma$, and hence the probability that its output is $\gamma_1$ is at most $1/2$.
:::</p>
<blockquote>
<h1 id="heading-1">
</h1></blockquote>
<p>This proof is simple but deserves a second read.
A crucial point here is to use FHE to allow the adversary to essentially &ldquo;feed $C&rsquo;$ to itself&rdquo; so it can obtain from an encryption of $\alpha$ an encryption of $\beta$, even though that would not be possible using black box access only.</p>
<h2 id="indistinguishability-obfuscation">Indistinguishability obfuscation
</h2><p>The proof can be generalized to give private key encryption for which the transformation to public key encryption would be insecure, and many other such constructions.
So, this result might (and indeed to a large extent did) seem like a death blow to general-purpose obfuscation.
However, already in that paper we noticed that there was a variant of obfuscation that we could not rule out, and this is the following:</p>
<blockquote>
<h1 id="iodef">
</h1></blockquote>
<p>We say a compiler $\mathcal{O}$ is an <em>indistinguishability obfuscator (IO)</em> if for every two circuits $C,C&rsquo;$ that have the same size and compute the same function,
the random variables $\mathcal{O}(C)$ and $\mathcal{O}(C&rsquo;)$ are computationally indistinguishable.</p>
<p>It is a good exercise to understand why the proof of the impossibility result above does not apply to rule out IO.
Nevertheless, a reasonable guess would be that:</p>
<ol>
<li>
<p>IO is impossible to achieve.</p>
</li>
<li>
<p>Even if it was possible to achieve, it is not good enough for most of the interesting applications of obfuscation.</p>
</li>
</ol>
<p>However, it turns out that this guess is (most likely) wrong.
New results have shown that IO is extremely useful for many applications, including those outlined above.
They also gave some evidence that it might be possible to achieve.
We&rsquo;ll talk about those works in the next lecture.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>One could also think of a deniable witness encryption, and so if Janine in the scenario above is forced to open the ciphertexts she sent by reveal the randomness used to create them, she can credibly claim that she didn&rsquo;t encrypt her knowledge of the conspiracy, but merely wanted to make sure that her family secret recipe for pumpkin pie is not lost when she passes away.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (typeof DISQUS == 'object') {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2025 Example Person
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.26.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
